
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   <!--
This HTML was auto-generated from MATLAB code.
To make changes, update the MATLAB code and republish this document.
      --><title>Tutorial II</title><meta name="generator" content="MATLAB 9.5"><link rel="schema.DC" href="http://purl.org/dc/elements/1.1/"><meta name="DC.date" content="2020-03-22"><meta name="DC.source" content="tutorial_ii.m"><style type="text/css">
html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,font,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td{margin:0;padding:0;border:0;outline:0;font-size:100%;vertical-align:baseline;background:transparent}body{line-height:1}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:before,blockquote:after,q:before,q:after{content:'';content:none}:focus{outine:0}ins{text-decoration:none}del{text-decoration:line-through}table{border-collapse:collapse;border-spacing:0}

html { min-height:100%; margin-bottom:1px; }
html body { height:100%; margin:0px; font-family:Arial, Helvetica, sans-serif; font-size:10px; color:#000; line-height:140%; background:#fff none; overflow-y:scroll; }
html body td { vertical-align:top; text-align:left; }

h1 { padding:0px; margin:0px 0px 25px; font-family:Arial, Helvetica, sans-serif; font-size:1.5em; color:#d55000; line-height:100%; font-weight:normal; }
h2 { padding:0px; margin:0px 0px 8px; font-family:Arial, Helvetica, sans-serif; font-size:1.2em; color:#000; font-weight:bold; line-height:140%; border-bottom:1px solid #d6d4d4; display:block; }
h3 { padding:0px; margin:0px 0px 5px; font-family:Arial, Helvetica, sans-serif; font-size:1.1em; color:#000; font-weight:bold; line-height:140%; }

a { color:#005fce; text-decoration:none; }
a:hover { color:#005fce; text-decoration:underline; }
a:visited { color:#004aa0; text-decoration:none; }

p { padding:0px; margin:0px 0px 20px; }
img { padding:0px; margin:0px 0px 20px; border:none; }
p img, pre img, tt img, li img, h1 img, h2 img { margin-bottom:0px; } 

ul { padding:0px; margin:0px 0px 20px 23px; list-style:square; }
ul li { padding:0px; margin:0px 0px 7px 0px; }
ul li ul { padding:5px 0px 0px; margin:0px 0px 7px 23px; }
ul li ol li { list-style:decimal; }
ol { padding:0px; margin:0px 0px 20px 0px; list-style:decimal; }
ol li { padding:0px; margin:0px 0px 7px 23px; list-style-type:decimal; }
ol li ol { padding:5px 0px 0px; margin:0px 0px 7px 0px; }
ol li ol li { list-style-type:lower-alpha; }
ol li ul { padding-top:7px; }
ol li ul li { list-style:square; }

.content { font-size:1.2em; line-height:140%; padding: 20px; }

pre, code { font-size:12px; }
tt { font-size: 1.2em; }
pre { margin:0px 0px 20px; }
pre.codeinput { padding:10px; border:1px solid #d3d3d3; background:#f7f7f7; }
pre.codeoutput { padding:10px 11px; margin:0px 0px 20px; color:#4c4c4c; }
pre.error { color:red; }

@media print { pre.codeinput, pre.codeoutput { word-wrap:break-word; width:100%; } }

span.keyword { color:#0000FF }
span.comment { color:#228B22 }
span.string { color:#A020F0 }
span.untermstring { color:#B20000 }
span.syscmd { color:#B28C00 }

.footer { width:auto; padding:10px 0px; margin:25px 0px 0px; border-top:1px dotted #878787; font-size:0.8em; line-height:140%; font-style:italic; color:#878787; text-align:left; float:none; }
.footer p { margin:0px; }
.footer a { color:#878787; }
.footer a:hover { color:#878787; text-decoration:underline; }
.footer a:visited { color:#878787; }

table th { padding:7px 5px; text-align:left; vertical-align:middle; border: 1px solid #d6d4d4; font-weight:bold; }
table td { padding:7px 5px; text-align:left; vertical-align:top; border:1px solid #d6d4d4; }





  </style></head><body><div class="content"><h1>Tutorial II</h1><!--introduction--><p>tutorial_ii.m - Slightly more involved set of examples involving txtlsim. We recommend you read through the <a href="https://vipulsinghal02.github.io/txtlsim_buildacell/tutorial.html">first</a> tutorial.</p><p>Vipul Singhal, 18 Mar 2018</p><p>In this tutorial, we explore and demonstrate some of the finer points of the txtlsim toolbox.</p><!--/introduction--><h2>Contents</h2><div><ul><li><a href="#1">Initializing the toolbox</a></li><li><a href="#2">IFFL example</a></li><li><a href="#3">Plot the result</a></li><li><a href="#4">Model Structure</a></li><li><a href="#6">The effect of varying aTc</a></li></ul></div><h2 id="1">Initializing the toolbox</h2><p>Remember to set the working directory to the trunk directory of the toolbox.</p><p>Use this command to add the subdirectories needed to your matlab path. To be run each time you begin a new TXTL toolbox session.</p><pre class="codeinput">txtl_init;
</pre><h2 id="2">IFFL example</h2><p>The code below can be used to set up an IFFL example with lasR as the activator, tetR as the repressor, and deGFP as the reporter.</p><p>Set up the standard TXTL tubes These load up the RNAP, Ribosome and degradation enzyme concentrations ``E2'' refers to a configuration file</p><pre class="codeinput">tube1 = txtl_extract(<span class="string">'E3'</span>);
tube2 = txtl_buffer(<span class="string">'E3'</span>);

<span class="comment">% Now set up a tube that will contain our DNA</span>
tube3 = txtl_newtube(<span class="string">'lastetIFFL'</span>);


<span class="comment">% Define the DNA strands, and all the relevant reactions</span>
txtl_add_dna(tube3, <span class="keyword">...</span>
  <span class="string">'plac(50)'</span>, <span class="string">'utr1b(20)'</span>, <span class="string">'lasR(1000)'</span>, 1, <span class="string">'plasmid'</span>);
txtl_add_dna(tube3, <span class="keyword">...</span>
  <span class="string">'plas(50)'</span>, <span class="string">'utr1b(20)'</span>, <span class="string">'tetR(1000)'</span>, 0.1, <span class="string">'plasmid'</span>);
txtl_add_dna(tube3, <span class="keyword">...</span>
  <span class="string">'plas_ptet(50)'</span>, <span class="string">'utr1b(20)'</span>, <span class="string">'deGFP(1000)'</span>, 1, <span class="string">'plasmid'</span>);

<span class="comment">% Mix the contents of the individual tubes</span>
Mobj = txtl_combine([tube1, tube2, tube3]);

txtl_addspecies(Mobj, <span class="string">'OC12HSL'</span>, 1000);
txtl_addspecies(Mobj, <span class="string">'aTc'</span>, 100);

<span class="comment">% Run a simulaton</span>
tic
[simData] = txtl_runsim(Mobj,14*60*60);
toc
t_ode = simData.Time;
x_ode = simData.Data;
</pre><pre class="codeoutput">Elapsed time is 0.911503 seconds.
</pre><h2 id="3">Plot the result</h2><p>The following function plots the proteins, RNA and resources in the toolbox. In the next section we delve deeper into the object oriented structure of the model, and how to plot arbitrary species in the model.</p><pre class="codeinput">txtl_plot(simData,Mobj);
</pre><pre class="codeoutput">Current plot held
</pre><img vspace="5" hspace="5" src="tutorial_ii_01.png" alt=""> <h2 id="4">Model Structure</h2><p>The model is organized as a model object, with sub objects specifying Parameters, Reactions, Species, etc. Type in</p><pre class="codeinput">Mobj
</pre><pre class="codeoutput">
   SimBiology Model - mix_of_E3_E3_lastetIFFL 

   Model Components:
     Compartments:      1
     Events:            2
     Parameters:        163
     Reactions:         102
     Rules:             12
     Species:           80

</pre><p>and the individual properties of the model object may be explored by typing, for example,</p><pre class="codeinput">Mobj.Events
</pre><pre class="codeoutput">
   SimBiology Event Array

   Index:    Trigger:                EventFcns:
   1         time &lt;= AGTPdeg_time    AGTPdeg_F = 0
   2         time &gt; AGTPdeg_time     AGTPdeg_F = AGTPdeg_rate

</pre><h2 id="6">The effect of varying aTc</h2><p>we will vary the aTc inducer in the IFFL circuit, and plot the results of these variations. We will use MATLAB cell arrays to store the variations of the models.</p><pre class="codeinput">close <span class="string">all</span>
initATC = [1 10 100 1000];
m = cell(length(initATC), 1);
simData = cell(length(initATC), 1);
t_ode = cell(length(initATC), 1);
x_ode = cell(length(initATC), 1);

tube1 = txtl_extract(<span class="string">'E3'</span>);
tube2 = txtl_buffer(<span class="string">'E3'</span>);
<span class="keyword">for</span> i = 1:length(initATC)
    tube3 = txtl_newtube(<span class="string">'lastetIFFL'</span>);
    txtl_add_dna(tube3, <span class="keyword">...</span>
      <span class="string">'plac(50)'</span>, <span class="string">'utr1b(20)'</span>, <span class="string">'lasR(1000)'</span>, 1, <span class="string">'plasmid'</span>);
    txtl_add_dna(tube3, <span class="keyword">...</span>
      <span class="string">'plas(50)'</span>, <span class="string">'utr1b(20)'</span>, <span class="string">'tetR(1000)'</span>, 0.1, <span class="string">'plasmid'</span>);
    txtl_add_dna(tube3, <span class="keyword">...</span>
      <span class="string">'plas_ptet(50)'</span>, <span class="string">'utr1b(20)'</span>, <span class="string">'deGFP(1000)'</span>, 1, <span class="string">'plasmid'</span>);
    m{i} = txtl_combine([tube1, tube2, tube3]);
    txtl_addspecies(m{i}, <span class="string">'OC12HSL'</span>, 1000);
    txtl_addspecies(m{i}, <span class="string">'aTc'</span>, initATC(i));
    [simData{i}] = txtl_runsim(m{i},6*60*60);
    t_ode{i} = simData{i}.Time;
    x_ode{i} = simData{i}.Data;
<span class="keyword">end</span>


speciesList = {<span class="string">'aTc'</span>
<span class="string">'protein tetRdimer'</span>
<span class="string">'RNA utr1b--deGFP'</span>
<span class="string">'protein deGFP*'</span>};

plotCustomSpecies2(m, x_ode,t_ode, speciesList, {<span class="string">'1nM'</span>, <span class="string">'10nM'</span>, <span class="string">'100nM'</span>, <span class="string">'1000nM'</span>})
</pre><img vspace="5" hspace="5" src="tutorial_ii_02.png" alt=""> <p class="footer"><br><a href="https://www.mathworks.com/products/matlab/">Published with MATLAB&reg; R2018b</a><br></p></div><!--
##### SOURCE BEGIN #####
%% Tutorial II
% tutorial_ii.m - Slightly more involved set of examples involving txtlsim. We
% recommend you read through the
% <https://vipulsinghal02.github.io/txtlsim_buildacell/tutorial.html
% first> tutorial. 
%
% Vipul Singhal, 18 Mar 2018
%
% In this tutorial, we explore and demonstrate some of the finer points of
% the txtlsim toolbox. 


%% Initializing the toolbox
% Remember to set the working directory to the trunk directory of the
% toolbox. 
% 
% Use this command to add the subdirectories needed to your matlab path. To
% be run each time you begin a new TXTL toolbox session. 
txtl_init;

%% IFFL example
% The code below can be used to set up an IFFL example with lasR as the
% activator, tetR as the repressor, and deGFP as the reporter. 
% 
% Set up the standard TXTL tubes
% These load up the RNAP, Ribosome and degradation enzyme concentrations
% ``E2'' refers to a configuration file 
tube1 = txtl_extract('E3');
tube2 = txtl_buffer('E3');

% Now set up a tube that will contain our DNA
tube3 = txtl_newtube('lastetIFFL');


% Define the DNA strands, and all the relevant reactions
txtl_add_dna(tube3, ...
  'plac(50)', 'utr1b(20)', 'lasR(1000)', 1, 'plasmid');	
txtl_add_dna(tube3, ...
  'plas(50)', 'utr1b(20)', 'tetR(1000)', 0.1, 'plasmid');	
txtl_add_dna(tube3, ...
  'plas_ptet(50)', 'utr1b(20)', 'deGFP(1000)', 1, 'plasmid');	

% Mix the contents of the individual tubes
Mobj = txtl_combine([tube1, tube2, tube3]);

txtl_addspecies(Mobj, 'OC12HSL', 1000);
txtl_addspecies(Mobj, 'aTc', 100);

% Run a simulaton
tic
[simData] = txtl_runsim(Mobj,14*60*60);
toc
t_ode = simData.Time;
x_ode = simData.Data;

%% Plot the result
% The following function plots the proteins, RNA and resources in the
% toolbox. In the next section we delve deeper into the object oriented
% structure of the model, and how to plot arbitrary species in the model. 
txtl_plot(simData,Mobj);

%% Model Structure
% The model is organized as a model object, with sub objects specifying
% Parameters, Reactions, Species, etc. Type in 
Mobj

%% 
% and the individual properties of the model object may be explored by
% typing, for example, 
Mobj.Events


%% The effect of varying aTc
% we will vary the aTc inducer in the IFFL circuit, and plot the
% results of these variations. We will use MATLAB cell arrays to store the
% variations of the models. 
close all
initATC = [1 10 100 1000];
m = cell(length(initATC), 1);
simData = cell(length(initATC), 1);
t_ode = cell(length(initATC), 1);
x_ode = cell(length(initATC), 1);

tube1 = txtl_extract('E3');
tube2 = txtl_buffer('E3');
for i = 1:length(initATC)
    tube3 = txtl_newtube('lastetIFFL');
    txtl_add_dna(tube3, ...
      'plac(50)', 'utr1b(20)', 'lasR(1000)', 1, 'plasmid');	
    txtl_add_dna(tube3, ...
      'plas(50)', 'utr1b(20)', 'tetR(1000)', 0.1, 'plasmid');	
    txtl_add_dna(tube3, ...
      'plas_ptet(50)', 'utr1b(20)', 'deGFP(1000)', 1, 'plasmid');	
    m{i} = txtl_combine([tube1, tube2, tube3]);
    txtl_addspecies(m{i}, 'OC12HSL', 1000);
    txtl_addspecies(m{i}, 'aTc', initATC(i));
    [simData{i}] = txtl_runsim(m{i},6*60*60);
    t_ode{i} = simData{i}.Time;
    x_ode{i} = simData{i}.Data;
end


speciesList = {'aTc'
'protein tetRdimer' 
'RNA utr1bREPLACE_WITH_DASH_DASHdeGFP'
'protein deGFP*'};

plotCustomSpecies2(m, x_ode,t_ode, speciesList, {'1nM', '10nM', '100nM', '1000nM'})

##### SOURCE END #####
--></body></html>